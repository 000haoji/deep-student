# Anki 智能制卡

## 概述

Anki 智能制卡是 Deep Student 的核心功能，旨在帮助你将学习材料高效转化为记忆卡片。

**核心理念：Chat-First (对话即制卡)**

Deep Student 采用 **ChatAnki** 技能作为统一的制卡入口。无论是零散的知识点，还是整本 PDF 教材，你都只需要在对话框中告诉 AI，剩下的工作由 AI 自动完成。

侧边栏的 **"Anki 制卡"** 页面现已升级为 **任务看板**，用于监控后台制卡进度和管理历史任务。

---

## 使用指南

### 1. 激活技能
在对话页面，点击技能按钮，激活 **ChatAnki** 技能。

> **提示**：只有激活了 `chatanki` 技能，AI 才具备调用制卡引擎的权限。

### 2. 对话式制卡 (零散知识点)
适合在学习过程中随时捕捉灵感。

1.  **发送内容**：直接告诉 AI 知识点，或者粘贴一段文字/图片。
2.  **下达指令**：输入 "把这个做成卡片" 或 "制作关于...的填空题"。
3.  **预览与确认**：
    *   AI 会解析内容并弹出一个 **制卡预览块**。
    *   你可以看到卡片的正面、背面和标签。
    *   点击 **确认** 直接同步到 Anki，或点击 **修改** 让 AI 调整。

### 3. 批量制卡 (基于文档)
适合处理整本教材、长论文或复习资料。

1.  **上传附件**：点击输入框左侧的 **回形针** 图标，上传 PDF、Word 或 Markdown 文件。
2.  **下达指令**：输入 "帮我把这个文档制作成 Anki 卡片，重点关注..."。
3.  **后台生成**：
    *   AI 会调用后台引擎 (CardForge) 开始批量处理。
    *   你会看到一个 **进度卡片**，显示当前的生成进度。
    *   你可以继续与 AI 对话，制卡任务会在后台异步进行。

---

## 任务看板 (Task Dashboard)

点击侧边栏的 **Anki 制卡** 图标，进入任务看板。这里不再是制卡表单，而是你的制卡任务控制台。

### 主要功能
*   **进度监控**：查看所有正在进行或已完成的制卡任务。
*   **任务控制**：
    *   **暂停/恢复**：随时暂停正在生成的任务。
    *   **重试**：对失败的任务进行断点续传或重试。
    *   **删除**：清理不再需要的任务记录。
*   **导出与同步**：
    *   **一键导出**：将生成的卡片导出为 `.apkg` 文件。
    *   **同步状态**：查看卡片是否已成功同步到本地 Anki。

---

## Template Designer (模板设计器)

Deep Student 内置了强大的可视化模板设计器，让你能像设计网页一样设计 Anki 卡片。

### 进入设计器
在 "Anki 制卡" 页面点击右上角的 **"模板库"** 或在设置中进入。

> **AI 辅助设计**：你可以激活 `template-designer` 技能，让 AI 帮你写 HTML/CSS 代码，甚至直接预览和创建模板。只需对 AI 说："帮我设计一个带发音按钮的卡片模板"。

### 主要功能
- **可视化编辑**：左侧编写 HTML/CSS，右侧实时预览效果。
- **字段管理**：自定义卡片字段（如 Front, Back, Note, Audio）。
- **AI 提取规则**：为每个字段配置 AI 提取指令，告诉 AI 如何从文档中提取对应内容。
- **内置模板**：系统预置了多种精美模板（如 "The Lab", "Swiss Design"），可直接使用或 Fork 修改。

---

## 连接 Anki

为了实现一键同步，你需要配置 AnkiConnect：

1. 打开 Anki 桌面端。
2. 安装插件 **AnkiConnect** (代码: `2055492159`)。
3. 在 Deep Student **设置 -> 数据治理** 或 **Anki 制卡** 侧边栏中，检查连接状态。

---

## 常见问题

### Q: 找不到原来的"批量制卡"页面了？
A: 传统的表单式制卡页面已被废弃。现在请直接在 Chat V2 中上传文件并发送指令，体验更流畅的 AI 驱动流程。您可以在 "Anki 制卡" 侧边栏中查看生成进度。

### Q: 为什么 Chat 中无法制卡？
A: 请确认是否激活了 `chatanki` 技能。只有激活该技能，AI 才有权限调用制卡工具。

### Q: 图片卡片无法显示？
A: 确保 AnkiConnect 配置正确，且允许媒体文件同步。Deep Student 会自动处理图片的 Base64 编码和传输。

### Q: 如何修改默认模板？
A: 在 Template Designer 中，你可以将喜欢的模板设为 "默认"。ChatAnki 会优先使用默认模板生成卡片。

---

*最后更新：2026-02-12*
# Deep Student

官网 www.deepstudent.com

当前正在进行公开测试中，此为尚未完善的版本。
该项目前身使用flask + python开发，现已完全重构。

**Deep Student** 是一个功能强大、集多种 AI 能力于一体的现代化桌面学习平台。它不仅仅是一个错题本，更是一个完整的知识获取、管理、复习和创造的智能中心。

该应用基于 **Tauri** 构建，结合了 **Rust** 的高性能后端和 **React** 的现代化前端，旨在为学生、研究者和终身学习者提供无缝、高效的学习体验。

![应用截图](https://raw.githubusercontent.com/000haoji/deep-student-docs/main/screenshots/main-interface.png)

## 项目状态

这是一个功能丰富且在活跃开发中的项目。大部分核心功能已稳定可用，同时包含一些前沿的实验性功能。

## 核心功能 (稳定可用)

---

### 1. AI 驱动的错题分析与对话

将传统的错题整理体验提升到全新维度。

*   **实现细节**:
    *   **多模态输入**: 支持文本与图片混合输入。后端接收到图片后，会调用配置好的多模态大模型（Vision Model）进行 OCR 识别。
    *   **流式对话**: 用户与 AI 的每一次交互都是一个可持久化的会话。AI 的分析、思考过程和最终答案会通过 WebSocket 实时流式传输到前端，提供即时反馈。
    *   **深度追问**: 所有对话历史会被记录，AI 在后续的交流中能够理解上下文，允许用户就特定知识点进行深入探讨。
    *   **结构化存储**: 分析结果（如题型、标签、AI 总结）会被结构化地存入本地 SQLite 数据库，方便后续的高级检索和管理。

### 2. 整合复习 (统一回顾)

打破知识孤岛，从更高的视角审视不同知识点间的联系。

*   **实现细节**:
    *   **资料整合**: 用户可以选择多个错题记录，系统会将这些记录的文本内容整合成一份临时的"复习材料"。
    *   **宏观分析**: 将整合后的材料连同用户的"复习目标"（一个总括性的问题）一并发送给 AI。通过特定的系统提示词（System Prompt），引导 AI 进行归纳、总结、对比等宏观层面的分析。
    *   **可恢复会话**: 复习会话的状态会被持久化到数据库。即使用户关闭应用，也可以在之后回到之前的复习进度，继续与 AI 对话。

### 3. RAG 驱动的个人知识库

将本地文档转化为一个可以与之"对话"的智能知识库。

*   **实现细节**:
    *   **文档处理**: 后端支持解析 PDF, DOCX 等格式的文档，将其内容分割成更小的文本块（Chunks）。
    *   **向量化与检索**: 每个文本块会被一个嵌入模型（Embedding Model）转换成向量，并存储起来。当用户提问时，系统会将问题同样转换为向量，在知识库中进行相似度检索，找到最相关的几个文本块。
    *   **精准作答**: 将检索到的相关文本块作为上下文（Context），连同用户的问题一起发送给 LLM，使其能够生成基于原文内容的、高度准确的回答。
    *   **知识隔离**: 支持创建不同的"知识子库"，在查询时可以限定范围，保证不同领域知识的独立性。

### 4. 增强的 Anki 制卡 (含图像挖空)

集成了强大的 Anki 卡片制作与导出能力，特别是先进的图像挖空功能。

*   **实现细节**:
    *   **一键生成**: 从错题分析、RAG 问答或任意文本中，一键调用 AI 生成符合 Anki 格式的问答卡片。
    *   **图像挖空 (当前仍在实验)**:
        *   这是一个**依赖外部视觉模型 API** 的高级功能。
        *   用户上传图片后，后端会调用配置好的多模态大模型 API（如 Gemini Pro Vision, Qwen-VL）来获取图中所有文本块的精确坐标。
        *   前端会将这些坐标渲染为可点击的区域，用户选择需要遮蔽的文本后，系统会生成包含"遮罩"信息的卡片数据，并存入数据库。
    *   **模板与导出**: 支持自定义卡片样式模板，并能通过 Anki Connect 直接推送到 Anki 桌面端，或打包为可移植的 `.apkg` 文件。

## 实验性功能 (开发中)

---

### 🕸️ 知识图谱 (Cogni-Graph)

这是一个前沿的、潜力巨大的功能模块，目前正处于积极开发阶段。它的目标是将知识以网络图谱的形式进行可视化和管理。

*   **当前状态**: **开发中，非开箱即用**。
*   **启用要求**:
    *   需要用户自行部署或拥有一个 **Neo4j** 图数据库实例。
    *   在应用的配置文件中正确填写 Neo4j 的地址、用户名和密码。
*   **已实现功能**:
    *   **后端 API**: 已实现创建知识节点（卡片）、打标签、查询、搜索相似节点、获取 AI 推荐等核心 API。
    *   **AI 融合**: 深度融合 LLM，例如在创建卡片时，可以调用 AI 自动为知识点生成关联标签。
*   **未来展望**:
    *   在前端实现一个交互式的、可视化的图谱界面。
    *   自动发现和链接不同错题、文档和笔记中的共同知识点，构建个人专属的知识网络。

## 技术栈

| 类别       | 技术                                             |
| ---------- | ---------------------------------------------- |
| **后端**   | Rust, Tauri, Tokio                             |
| **前端**   | React, TypeScript, Vite                        |
| **数据库** | SQLite (本地数据), **Neo4j** (知识图谱，需用户自行配置)        |
| **AI 核心**  | 多模型适配器, RAG 引擎, reqwest, serde                 |
| **视觉模型** | 图像挖空和 OCR 功能依赖外部多模态大模型 API (如 Gemini, Qwen-VL) |

## 项目结构

```
.
├── src/                # 前端代码 (React + TypeScript)
│   ├── components/     # UI 组件
│   └── App.tsx         # 应用主组件
├── src-tauri/          # 后端代码 (Rust)
│   ├── src/
│   │   ├── analysis_service.rs   # 核心分析服务
│   │   ├── cogni_graph/          # [开发中] 知识图谱模块
│   │   ├── rag_manager.rs        # RAG 知识库管理器
│   │   ├── llm_manager.rs        # 多模型管理器
│   │   └── commands.rs           # 暴露给前端的 Tauri 命令
│   └── Cargo.toml      # Rust 依赖管理
└── package.json        # 前端依赖管理

```

## 快速上手

### 环境准备

1.  **Rust**: 参考 Rust 官网安装指南。
2.  **Node.js**: 安装 Node.js (推荐 LTS 版本) 和 `pnpm` (`npm install -g pnpm`)。
3.  **Tauri CLI**: `cargo install tauri-cli`。

### 安装与运行

1.  **克隆仓库**: `git clone <your-repo-url>`
2.  **安装依赖**: `cd <repo-folder> && pnpm install`
3.  **运行开发**: `pnpm run tauri dev`

### **重要：应用配置**

本应用的大部分高级 AI 功能依赖外部 API。

1.  **LLM 与视觉模型 API**: 在首次启动或设置页面中，配置您的大语言模型和视觉模型提供商的 API Key 和 Base URL。
2.  **知识图谱 (Neo4j)**: 如需测试知识图谱功能，请在 `src-tauri` 目录下寻找相关的**示例配置文件** (如 `cogni-graph-config.example.toml`)，将其复制为正式配置文件，并填入您的 Neo4j 数据库信息。

---

_这份 README 文档由 AI 根据项目代码结构和实现细节自动生成并修订。_ 
